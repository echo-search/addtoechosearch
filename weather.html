<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RealWeather Dashboard</title>
<style>
  body {
    margin:0;
    font-family: system-ui;
    background: linear-gradient(to bottom, #4facfe, #00f2fe);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  #container {
    background: rgba(255,255,255,0.95);
    padding: 20px;
    border-radius: 15px;
    width: 360px;
    box-shadow: 0 0 20px rgba(0,0,0,0.2);
    text-align: center;
  }
  input, button {
    padding: 10px;
    margin: 5px 0;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 1rem;
  }
  button {
    background: #00cec9;
    color: white;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  button svg {
    width: 20px;
    height: 20px;
    margin-right: 5px;
    fill: white;
  }
  #suggestions {
    list-style: none;
    padding: 0;
    margin: 0;
    max-height: 100px;
    overflow-y: auto;
    text-align: left;
  }
  #suggestions li {
    padding: 5px;
    cursor: pointer;
  }
  #suggestions li:hover {
    background: #eee;
  }
  #forecast {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
  }
  #forecast div {
    text-align: center;
  }
</style>
</head>
<body>
<div id="container">
  <h1>RealWeather Dashboard</h1>
  <input id="cityInput" placeholder="Enter city..." />
  <ul id="suggestions"></ul>
  <button id="locBtn">
    <svg viewBox="0 0 24 24"><path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8zm0-7a1 1 0 0 1 1 1v2.07A8.001 8.001 0 0 1 20.93 11H23a1 1 0 0 1 0 2h-2.07A8.001 8.001 0 0 1 13 20.93V23a1 1 0 0 1-2 0v-2.07A8.001 8.001 0 0 1 3.07 13H1a1 1 0 0 1 0-2h2.07A8.001 8.001 0 0 1 11 3.07V1a1 1 0 0 1 1-1z"/></svg>
    Use My Location
  </button>
  <div id="currentWeather">
    <h2 id="cityName"></h2>
    <p id="temp" style="font-size:2rem"></p>
    <p id="desc"></p>
    <img id="icon" width="80" height="80" />
  </div>
  <div id="forecast"></div>
</div>

<script>
const apiKey = "be35174a4b955e5f7df0c3820b80f84a";

const input = document.getElementById("cityInput");
const suggestions = document.getElementById("suggestions");
const locBtn = document.getElementById("locBtn");
const cityName = document.getElementById("cityName");
const temp = document.getElementById("temp");
const desc = document.getElementById("desc");
const icon = document.getElementById("icon");
const forecastDiv = document.getElementById("forecast");

async function fetchWeather(lat, lon, name) {
  const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`);
  const data = await res.json();
  cityName.textContent = name || data.name;
  temp.textContent = Math.round(data.main.temp) + "°C";
  desc.textContent = data.weather[0].description;
  // OpenWeather provides PNG icons; you could use SVG equivalents from their site or convert PNG to inline SVG
  icon.src = `https://openweathermap.org/img/wn/${data.weather[0].icon}.png`;

  const forecastRes = await fetch(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`);
  const forecastData = await forecastRes.json();
  forecastDiv.innerHTML = "";

  const days = {};
  forecastData.list.forEach(item => {
    const date = item.dt_txt.split(" ")[0];
    if(!days[date] && item.dt_txt.includes("12:00:00")) days[date] = item;
  });

  Object.values(days).forEach(item => {
    const dayDiv = document.createElement("div");
    const d = new Date(item.dt * 1000);
    const dayName = d.toLocaleDateString("en-US", { weekday: "short" });
    const dayP = document.createElement("p");
    dayP.textContent = dayName;
    const iconImg = document.createElement("img");
    iconImg.src = `https://openweathermap.org/img/wn/${item.weather[0].icon}.png`;
    iconImg.width = 50;
    iconImg.height = 50;
    const tempP = document.createElement("p");
    tempP.textContent = Math.round(item.main.temp) + "°C";

    dayDiv.appendChild(dayP);
    dayDiv.appendChild(iconImg);
    dayDiv.appendChild(tempP);
    forecastDiv.appendChild(dayDiv);
  });
}

async function fetchSuggestions(query) {
  if(!query) { suggestions.innerHTML = ""; return; }
  const res = await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${query}&limit=5&appid=${apiKey}`);
  const data = await res.json();
  suggestions.innerHTML = "";
  data.forEach(loc => {
    const li = document.createElement("li");
    li.textContent = `${loc.name}, ${loc.country}`;
    li.onclick = () => {
      fetchWeather(loc.lat, loc.lon, loc.name);
      suggestions.innerHTML = "";
      input.value = loc.name;
    };
    suggestions.appendChild(li);
  });
}

input.addEventListener("input", e => fetchSuggestions(e.target.value));

locBtn.addEventListener("click", () => {
  navigator.geolocation.getCurrentPosition(pos => {
    fetchWeather(pos.coords.latitude, pos.coords.longitude);
  });
});
</script>
</body>
</html>
